@layout('layouts.appfix')
@section('title')
  <title>Moleawiz|User|Learner Profile Field| Edit Category and Field</title>
@endsection
@section('style')
<!-- third party css -->
<link href="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
<link href="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-select-bs4/css/select.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<!-- third party css end -->
<style>
table, th, td {
  border-style: none;
}
.dataTables_length_custom{
  padding-bottom: 0px!important;
}
.dataTables_filter_custom{
  padding-bottom: 0px !important;
}
.search-datatable {
    border-radius: 30px!important;
    padding-bottom: -5px!important;
      /* background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICB2ZXJzaW9uPSIxLjEiICAgaWQ9InN2ZzQ0ODUiICAgdmlld0JveD0iMCAwIDIxLjk5OTk5OSAyMS45OTk5OTkiICAgaGVpZ2h0PSIyMiIgICB3aWR0aD0iMjIiPiAgPGRlZnMgICAgIGlkPSJkZWZzNDQ4NyIgLz4gIDxtZXRhZGF0YSAgICAgaWQ9Im1ldGFkYXRhNDQ5MCI+ICAgIDxyZGY6UkRGPiAgICAgIDxjYzpXb3JrICAgICAgICAgcmRmOmFib3V0PSIiPiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+ICAgICAgICA8ZGM6dHlwZSAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4gICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPiAgICAgIDwvY2M6V29yaz4gICAgPC9yZGY6UkRGPiAgPC9tZXRhZGF0YT4gIDxnICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC0xMDMwLjM2MjIpIiAgICAgaWQ9ImxheWVyMSI+ICAgIDxnICAgICAgIHN0eWxlPSJvcGFjaXR5OjAuNSIgICAgICAgaWQ9ImcxNyIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjAuNCw4NjYuMjQxMzQpIj4gICAgICA8cGF0aCAgICAgICAgIGlkPSJwYXRoMTkiICAgICAgICAgZD0ibSAtNTAuNSwxNzkuMSBjIC0yLjcsMCAtNC45LC0yLjIgLTQuOSwtNC45IDAsLTIuNyAyLjIsLTQuOSA0LjksLTQuOSAyLjcsMCA0LjksMi4yIDQuOSw0LjkgMCwyLjcgLTIuMiw0LjkgLTQuOSw0LjkgeiBtIDAsLTguOCBjIC0yLjIsMCAtMy45LDEuNyAtMy45LDMuOSAwLDIuMiAxLjcsMy45IDMuOSwzLjkgMi4yLDAgMy45LC0xLjcgMy45LC0zLjkgMCwtMi4yIC0xLjcsLTMuOSAtMy45LC0zLjkgeiIgICAgICAgICBjbGFzcz0ic3Q0IiAvPiAgICAgIDxyZWN0ICAgICAgICAgaWQ9InJlY3QyMSIgICAgICAgICBoZWlnaHQ9IjUiICAgICAgICAgd2lkdGg9IjAuODk5OTk5OTgiICAgICAgICAgY2xhc3M9InN0NCIgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjY5NjQsLTAuNzE3NiwwLjcxNzYsMC42OTY0LC0xNDIuMzkzOCwyMS41MDE1KSIgICAgICAgICB5PSIxNzYuNjAwMDEiICAgICAgICAgeD0iLTQ2LjIwMDAwMSIgLz4gICAgPC9nPiAgPC9nPjwvc3ZnPg==);
      background-repeat: no-repeat;
      background-color: #fff;
      background-position: 0px 3px !important; */

}

.tr-odd{
  border-color: transparent!important;
  background-color: #F7F9FC!important;
}
.tr-even{
  border-color: transparent!important;
  background-color: #FFFFFF!important;
}
.pd-top-pagination{
  padding-top: 16px!important;;
}
.add-button{
   background-color: #FFFFFF!important;
   border-color: #6D757D!important;
}
.add-button:hover {
  border-color: #DF2333!important;
  background-color: #DF2333!important;
  color: white!important;
}


.page-item.active .page-link {
    /* z-index: 3; */
    position: relative;
    display: block;
    color: #fff;
    background-color: #DF2333;
    border-color: #DF2333;
}


  .bottom-wrapper {
      margin-top: 0.5em;
  }
  .top-wrapper {
    margin-bottom: 0.5em;
  }
  /* .card-drop:hover{
    color: #DF2333!important;
  } */
</style>

@endsection
@section('navbar')
@include('layouts.navbar.navbar_custom')
@endsection

@section('left_sidebar')
@include('layouts.sidebar.sidebar_left_base')
@endsection
@section('content')
<div class="content-page">
  <div class="content">
      @loggedIn
    <input type="hidden" value="{{authUser.firstname +' '+ authUser.lastname}}"  id="auth_name">
@else
   <script>
      window.location.replace("{{route('login')}}");

   </script>
@endloggedIn

      <!-- Start Content-->
      <div class="container-fluid">

          <!-- start page title -->
          <div class="row">
            <div class="col-12">
              <div class="page-title-box">
                <div class="page-title-right">
                  <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item  breadcrumb-link"><a class="breadcrumb-link text-hover-color-scheme"  href="{{route('home')}}">HOME</a></li>
                    <li class="breadcrumb-item  breadcrumb-link active">Learner Profile Fields</li>
                  </ol>
                </div>
                <h4 class="page-title">Learner Profile Fields</h4>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
                <div class="card">

                    <div class="card-body">



                        <div  class="responsive-table-plugin dataTables_wrapper dt-bootstrap4 no-footer">

                            <div class="row">

                                <div class="col align-self-start">

                                </div>

                                <div class="col align-self-end">

                                </div>

                            </div>
                             <script>
                              let arrAssignments = [];
                              let i = 0;
                              let j = 0;
                              let sizeArrField =0;

                            </script>
                            @each(data in datas)
                            <script>
                              i=0;
                            </script>
                            <div class="row">

                              <div class="btn-toolbar" style="padding-bottom:8px">
                                <div class="btn-group dropdown-btn-group pull-left" style="padding-bottom:5px;">
                                <b ><h4 class="page-title" style="font-size:20px;"> {{data.name}}<a class="" style="color:#99A6AD"  href="{{ route('dashboard.user.learner-profile-field.edit-category', { id : data.id }) }}" > <i class="mdi mdi-pencil text-hover-color-scheme" title="Edit category" tabindex="0"
                                    data-plugin="tippy" data-tippy-theme="translucent"></i></a></h4></b>
                                </div>
                                <div class="btn-group dropdown-btn-group pull-right" style="padding-bottom:5px;">


                                </div>
                              </div>
                                <div class="col-sm-12">
                                    <table  class="table w-100 nowrap datatable" role="grid" aria-describedby="datatable-buttons_info" style="width: 924px;">
                                    <thead>
                                      <tr>
                                      </tr>
                                    </thead>


                            <tbody>
                              <script>
                                sizeArrField = {{data.getRelated('fields').rows.length}}
                              </script>
                              @each(item in data.getRelated('fields').rows )
                              <script>
                                i++;
                                if(i%2==0){
                                  document.write(" <tr style='background-color:#FFFFFF;'>");
                                }
                                else{

                                  document.write(" <tr style='background-color:#F7F9FC;'>");
                                }

                              </script>





                              <td valign="middle" style="opacity : 1" width="10px">
                                <script>
                                  if(i > 1){
                                    document.write('<a  href="{{ route('dashboard.user.learner-profile-field.moveup', { id : item.id }) }}" class=" text-hover-color-scheme" style="color:#99A6AD; float: none; font-size:12px;"><i class="mdi mdi-24px mdi-arrow-up" title="Move up" data-plugin="tippy" data-tippy-theme="translucent" ></i> </a>');
                                  }
                                </script>
                              </td>
                              <td valign="middle" style="opacity : 1" width="10px">
                                <script>
                                  if(i < sizeArrField){

                                     document.write('<a  href="{{ route('dashboard.user.learner-profile-field.movedown', { id : item.id }) }}" class=" text-hover-color-scheme" style="color:#99A6AD; float: none; font-size:12px;"><i class="mdi mdi-24px mdi-arrow-down" title="Move down" data-plugin="tippy" data-tippy-theme="translucent" ></i> </a>')
                                  }
                                </script>
                              </td>
                              <td valign="middle" style="opacity : 1">
                                {{item.name}}
                              </td>

                              <td valign="middle"  style="opacity : 1">


                                <div class="dropdown float-end" >
                                  <a href="#" class="dropdown-toggle arrow-none card-drop text-hover-color-scheme" data-bs-toggle="dropdown" aria-expanded="false">
                                      <i class="mdi mdi-dots-horizontal"></i>
                                  </a>
                                  <div class="dropdown-menu dropdown-menu-end">

                                      <a  href="{{ route('dashboard.user.learner-profile-field.edit-field', { id : item.id }) }}" class="tabledit-edit-button dropdown-item btnedit-{{item.id}}"  dataid="{{item.id}}" style="float: none;"><!--<span class="mdi mdi-pencil"></span>--> Edit</a>
                                      <div class="dropdown-divider"></div>
                                      <a  href="javascript:void(0);" class="dropdown-item btndelete" fullname="{{ item.name  }}" dataid="{{item.id}}" style="float: none;"><!--<span class="mdi mdi-delete"></span>--> Delete</a>

                                  </div>
                              </div>
                              </td>

                            </tr>
                              @endeach
                            </tbody>
                        </table>
                      </div>
                    </div>
                    @endeach

                      </div>
                      <div class="row">
                      <div class="col-md-4">
                      <span style="padding-right:20px;" > </span><a  href="{{ route('dashboard.user.learner-profile-field.create-field') }}" class=" text-hover-color-scheme"   style="color:#99A6AD; float: none; font-size:14px;"><i class="mdi mdi-plus-circle" ></i> Create a new profile field</a>
                      </div>
                      </div>

                    </div> <!-- end card body-->
                      <div class="row">
                        <div class="col-md-6">
                          <span style="padding-right:0px; padding-bottom:30px;" > </span><a  href="{{ route('dashboard.user.learner-profile-field.create-category') }}" class=" text-hover-color-scheme"   style="color:#99A6AD; float: none; font-size:20px; padding-left:20px;"><i class="mdi mdi-plus-circle" ></i> Create a new profile category</a>
                        </div>

                      </div>
                       <br>
                       <br>
                  </div> <!-- end card -->
            </div><!-- end col-->
        </div>
        <!-- end row-->

      </div> <!-- container -->

  </div> <!-- content -->

   <!-- Footer Start -->
  @include('layouts.footer')
  <!-- end Footer -->

  @include('layouts.modal_and_alert')

</div>
@endsection
@section('right_sidebar')
@include('layouts.sidebar.sidebar_right_base')
@endsection
@section('script')
<!-- third party js -->
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/datatables.net-select/js/dataTables.select.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/pdfmake/build/pdfmake.min.js"></script>
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/pdfmake/build/vfs_fonts.js"></script>
<!-- Sweet Alerts js -->
<script src="{{ BASE_URL() }}/templates/UBold_v5.1.0/Admin/dist/assets/libs/sweetalert2/sweetalert2.all.min.js"></script>

<script>
  let dataId =  0;
  let urlDelete = '';
  $(document).ready(function(){
   $(".mlw-li").hide()
   $(".mlw-li-home").show()
   @if(flashMessage('notification'))

    /*Swal.fire({
      icon: 'success',
      title: 'Success!',
      text: "{{flashMessage('notification')}}",

    });*/

    $("#title-paragraph-alert-modal-success").html("Success!");
    $("#content-paragraph-alert-modal-success").html("{{flashMessage('notification')}}");
    $("#continue-alert-modal-success").html("Continue");
    $("#info-alert-modal-success").modal('show');

   @endif



   @if(flashMessage('failMessage'))

    Swal.fire({
      icon: 'error',
      title: 'Failed!',
      text: "{{flashMessage('failMessage')}}",

    })
   @endif

   @if(flashMessage('successMessage'))

    /*Swal.fire({
      icon: 'success',
      title: 'Success!',
      text: "{{flashMessage('successMessage')}}",

    })*/
    $("#title-paragraph-alert-modal-success").html("Success!");
    $("#content-paragraph-alert-modal-success").html("{{flashMessage('successMessage')}}");
    $("#continue-alert-modal-success").html("Continue");
    $("#info-alert-modal-success").modal('show');
   @endif







   let url = "{{ BASE_URL() + route('dashboard.role-management.datatable') }}";


  $(".dataTables_length select").addClass("form-select form-select-sm"),
  $(".dataTables_length select").removeClass("custom-select custom-select-sm"),
  $(".dataTables_length label").addClass("form-label")
  $(".dataTables_filter label").addClass("form-label")



});


   $('.btndelete').on('click', function() {
      let dataid = $(this).attr("dataid");
      let fullname = $(this).attr("fullname");
      let urldelete = "{{ route('dashboard.user.learner-profile-field.soft-delete',{ id : 'data.id' })}}";

      urldelete = urldelete.replace('data.id', dataid);
      $('#top-modal-delete').modal('show');
      dataId =  dataid;
      urlDelete = urldelete;
      let labelDelete = 'Delete Profile Field';
      let contentParagraphDelete = "Do you really want to delete profile field </br>" + "<b>"+"'"+fullname+"'"+"</b>"+"?";
      let yesDelete = "Delete Profile Field";
      let noDelete  = "Never Mind, Keep the Profile Field";
      $('#topModalLabelDelete').html(labelDelete);
      $('#content-paragraph-delete').html(contentParagraphDelete);
      $('#yes-delete').html(yesDelete);
      $('#no-delete').html(noDelete);


      //console.log(urldelete);
      /*Swal.fire({
        title: 'Are you sure want to delete '+ fullname +' ?',
        text: "You won't be able to revert this!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
          if (result.isConfirmed) {
              window.location.href = urldelete;
          }
        })*/

   })

   $('#yes-delete').on('click', function() {
      window.location.href = urlDelete;
   });

   console.log( arrAssignments);
</script>
<!-- third party js ends -->
@endsection
